cmake_minimum_required(VERSION 3.13)

project(craby-{{ kebab_name }})

set (CMAKE_VERBOSE_MAKEFILE ON)
set (CMAKE_CXX_STANDARD 20)

find_package(ReactAndroid REQUIRED CONFIG)
find_package(hermes-engine REQUIRED CONFIG)

# Import the pre-built Craby library
add_library({{ kebab_name }}-lib STATIC IMPORTED)
set_target_properties({{ kebab_name }}-lib PROPERTIES
  IMPORTED_LOCATION "${CMAKE_SOURCE_DIR}/src/libs/${ANDROID_ABI}/lib{{ flat_name }}-craby.a"
)
target_include_directories({{ kebab_name }}-lib INTERFACE
  "${CMAKE_SOURCE_DIR}/src/libs/${ANDROID_ABI}/include"
)

# Generated C++ source files by the Craby
add_library(cxx-{{ kebab_name }} SHARED
  src/main/cpp/OnLoad.cpp
  ../cpp/{{ cxx_name }}.cpp
)
target_include_directories(cxx-{{ kebab_name }} PRIVATE
  ../cpp
)

target_link_libraries(cxx-{{ kebab_name }}
  # android
  ReactAndroid::reactnative
  ReactAndroid::jsi
  hermes-engine::libhermes
  # {{ kebab_name }}-lib
  {{ kebab_name }}-lib
)
